<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Savings Goals | Financial Planning</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>
body {
    background: #f2f6fb;
    font-family: 'Segoe UI', sans-serif;
}

/* Sidebar */
.sidebar {
    width: 230px;
    background: #1f3c88;
    min-height: 100vh;
    padding: 30px 20px;
    position: fixed;
}
.sidebar h5 {
    color: #fff;
    font-weight: 700;
    margin-bottom: 40px;
}
.sidebar a {
    display: block;
    color: #dbe4ff;
    padding: 10px 14px;
    margin-bottom: 10px;
    border-radius: 10px;
    text-decoration: none;
    font-size: 14px;
}
.sidebar a i { margin-right: 10px; }
.sidebar a:hover,
.sidebar a.active {
    background: rgba(255,255,255,0.18);
    color: #fff;
}

/* Main */
.main {
    margin-left: 250px;
    padding: 40px;
}

/* Card */
.card-box {
    background: #ffffff;
    padding: 30px 25px;
    border-radius: 18px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

/* Title */
.card-title {
    font-size: 24px;
    font-weight: 700;
    color: #1f3c88;
    text-align: center;
    margin-bottom: 25px;
}

/* Table */
.table th {
    background: #e7efff;
    color: #1f3c88;
}
.table td {
    background: #f9fbff;
    vertical-align: middle;
}

/* Progress */
.progress {
    height: 22px;
    border-radius: 10px;
    background: #e1e8f5;
}
.progress-bar {
    background: linear-gradient(135deg, #1f3c88, #3f6ad8);
    font-weight: 600;
}

/* Buttons */
.btn-main {
    background: linear-gradient(135deg, #1f3c88, #3f6ad8);
    border: none;
    color: #fff;
    font-weight: 600;
    border-radius: 10px;
}
.btn-main:hover {
    background: linear-gradient(135deg, #3f6ad8, #1f3c88);
}

.btn-warning-custom {
    background: #f0ad4e;
    border: none;
    color: #fff;
}
.btn-danger-custom {
    background: #dc3545;
    border: none;
    color: #fff;
}

.btn-action {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}
</style>
</head>

<body>

<!-- Sidebar -->
<div class="sidebar">
    <h5>FINANCIAL<br>PLANNING</h5>
    <a href="{{ url_for('auth.dashboard') }}"><i class="bi bi-speedometer2"></i> Dashboard</a>
    <a href="{{ url_for('account_profile.view_profile') }}"><i class="bi bi-person-circle"></i> My Profile</a>
    <a href="{{ url_for('expense.expenses') }}"><i class="bi bi-cash-stack"></i> Expenses</a>
    <a href="{{ url_for('savings.savings') }}" class="active"><i class="bi bi-piggy-bank"></i> Savings / Goal</a>
    <a href="{{ url_for('ai.ai_page') }}"><i class="bi bi-lightbulb"></i> AI Recommendation</a>
    <a href="{{ url_for('auth.logout') }}"><i class="bi bi-box-arrow-right"></i> Logout</a>
</div>

<!-- Main -->
<div class="main">
    <div class="card-box">

        <div class="card-title">My Savings Goals</div>

        <div class="text-end mb-3">
            <a href="{{ url_for('savings.add_goal_page') }}" class="btn btn-main">
                <i class="bi bi-plus-circle"></i> Add Goal
            </a>
        </div>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Goal</th>
                    <th>Target (RM)</th>
                    <th>Current (RM)</th>
                    <th>Progress</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for goal in goals %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ goal.name }}</td>
                    <td>{{ goal.target_amount }}</td>
                    <td>{{ goal.current_amount }}</td>
                    <td style="width:180px;">
                        <div class="progress">
                            <div class="progress-bar"
                                 style="width: {{ (goal.current_amount / goal.target_amount * 100) if goal.target_amount else 0 }}%;">
                                {{ ((goal.current_amount / goal.target_amount * 100)|round(0)) if goal.target_amount else 0 }}%
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="btn-action">
                            <a href="{{ url_for('savings.add_amount', goal_id=goal.id) }}" class="btn btn-main btn-sm">Add</a>
                            <a href="{{ url_for('savings.edit_goal', goal_id=goal.id) }}" class="btn btn-warning-custom btn-sm">Edit</a>
                            <form action="{{ url_for('savings.delete_goal', goal_id=goal.id) }}" method="POST">
                                <button type="submit" class="btn btn-danger-custom btn-sm">Delete</button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6" class="text-center text-muted">
                        No savings goals yet
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</div>

</body>
</html>
